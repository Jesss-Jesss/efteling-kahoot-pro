<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Player</title>
<link rel="stylesheet" href="/style.css">
<script src="/socket.io/socket.io.js"></script>
</head>
<body>

<h1>ğŸ¢ Join</h1>

<div class="card">
    <input id="name" placeholder="Naam">
    <input id="code" placeholder="Game code">
    <button onclick="join()">Join</button>
</div>

<div class="card" id="questionBox" style="display:none;">
    <h2 id="questionText"></h2>
    <p>Tijd: <span id="timer">30</span></p>
    <input id="answerInput" placeholder="Typ je antwoord">
    <button onclick="submitAnswer()">Verstuur</button>
    <p id="result"></p>
</div>

<script>
const socket = io();
let playerName = "";

function join() {
    playerName = document.getElementById("name").value;
    const code = document.getElementById("code").value;
    socket.emit("joinGame", { name: playerName, code });
}

socket.on("newQuestion", question => {
    document.getElementById("questionBox").style.display = "block";
    document.getElementById("questionText").innerText = question;
});

socket.on("questionStarted", seconds => {
    let time = seconds;
    const timerEl = document.getElementById("timer");
    timerEl.innerText = time;

    const interval = setInterval(() => {
        time--;
        timerEl.innerText = time;
        if (time <= 0) clearInterval(interval);
    }, 1000);
});

function submitAnswer() {
    const answer = document.getElementById("answerInput").value;
    socket.emit("submitAnswer", { name: playerName, answer });
}

socket.on("answerResult", correct => {
    document.getElementById("result").innerText =
        correct ? "âœ… Goed!" : "âŒ Fout!";
});
</script>

</body>
</html>
