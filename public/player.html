<!DOCTYPE html>
<html>
<head>
<title>Player</title>
<link rel="stylesheet" href="/style.css">
<script src="/socket.io/socket.io.js"></script>
</head>
<body>

<h1>ğŸ¢ Join</h1>

<div id="join">
<input id="name" placeholder="Naam">
<input id="code" placeholder="Code">
<button onclick="join()">Join</button>
<p id="msg"></p>
</div>

<div id="game" style="display:none;">
<h2 id="question"></h2>
<div id="timer"></div>
<input id="answer" placeholder="Typ antwoord">
<button onclick="send()">Verstuur</button>
<p id="result"></p>
</div>

<script>
const socket=io();
let playerName="";

function join(){
playerName=document.getElementById("name").value;
const code=document.getElementById("code").value;
socket.emit("joinGame",{name:playerName,code});
document.getElementById("join").style.display="none";
document.getElementById("game").style.display="block";
}

socket.on("invalidCode",()=>document.getElementById("msg").innerText="Foute code");
socket.on("nameTaken",()=>document.getElementById("msg").innerText="Naam bestaat");

socket.on("newQuestion",q=>{
document.getElementById("question").innerText=q;
});

socket.on("startTimer",sec=>{
let t=sec;
const el=document.getElementById("timer");
el.innerText=t;
const i=setInterval(()=>{
t--;el.innerText=t;
if(t<=0)clearInterval(i);
},1000);
});

function send(){
socket.emit("submitAnswer",{name:playerName,answer:document.getElementById("answer").value});
}

socket.on("answerResult",correct=>{
document.getElementById("result").innerText=correct?"âœ… Goed":"âŒ Fout";
});
</script>

</body>
</html>
