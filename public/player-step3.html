<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Kies je personage</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>

    <h2>âœ” Gelukt! Je bent nu in de quiz</h2>

<p>Zie je je naam op het leaderboard?</p>

<div class="selected-character">
    <div class="edit-icon" onclick="openGallery()">âœï¸</div>
    <img id="chosenImage" width="120">
    <p id="chosenName"></p>
</div>

<button onclick="openGallery()">Kies / wijzig je personage</button>

<div class="gallery-overlay" id="gallery">
    <div class="gallery-grid" id="galleryGrid"></div>
</div>
    
    <div id="step3">
        <h1>ğŸ¢ Kies je Efteling personage</h1>
        <div id="characters">
            <div class="character" data-name="Baron1898">
                <img src="https://www.efteling.com/nl/-/media/images/kids/karakters/jokie/profielen/700x610-jokie-profiel-large.png?h=610&w=700&la=nl&hash=AFCC6A2C7EE087EFB6405C06EA6976E9" />
                <p>Joki</p>
            </div>
            <div class="character" data-name="Symbolica">
                <img src="https://www.efteling.com/nl/-/media/images/kids/karakters/sprookjesboom/profielen/700x610-langnek-profiel.png?h=610&w=700&la=nl&hash=2C9696EF6D052C75BBA3C3AFC72BB74B" />
                <p>Langnek</p>
            </div>
            <div class="character" data-name="VliegendeHollander">
                <img src="https://www.efteling.com/nl/-/media/images/kids/karakters/sprookjesboom/profielen/700x610-klein-duimpje-profiel.png?h=610&w=700&la=nl&hash=605528BD2E96980C7466246FFC39F7DC" />
                <p>Klein duimpje</p>
            </div>
        </div>
    </div>

    <script>
        const chars = document.querySelectorAll(".character");
        chars.forEach(c => {
            c.addEventListener("click", () => {
                const chosen = c.dataset.name;
                localStorage.setItem("character", chosen);
                window.location.href = "/player.html"; // Ga naar player scherm

                <script>
/* ğŸ”¥ NIEUW TOEGEVOEGD */

const params = new URLSearchParams(window.location.search);
const gameId = localStorage.getItem("gameId"); // we gebruiken localStorage (veiliger)
const name = localStorage.getItem("playerName");

function choose(character) {

    if (!gameId || !name) {
        alert("Er ontbreekt informatie. Ga opnieuw naar stap 1.");
        window.location.href = "/player-step1.html";
        return;
    }

    fetch("/join", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            gameId: gameId,
            name: name,
            character: character
        })
    })
    .then(res => res.json())
    .then(data => {
        if (data.success) {
            alert("Je zit in het spel!");
        } else {
            alert(data.error);
        }
    });
}
</script>
            });
        });
    </script>
</body>
</html>
